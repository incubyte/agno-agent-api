# Location Specific Intelligence Medical Agent System\n\nA comprehensive, AI-powered system that provides real-time, location-specific medical intelligence to support healthcare decisions. The system combines geographic context with epidemiological data, healthcare resource mapping, and risk assessment to deliver actionable health recommendations.\n\n## üèóÔ∏è Architecture Overview\n\nThe system implements a **multi-agent architecture** with four specialized agents coordinated by a master orchestrator:\n\n```\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ                 Master Orchestrator                             ‚îÇ\n‚îÇ          Location Health Intelligence Agent                     ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n                          ‚îÇ\n          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n          ‚îÇ               ‚îÇ               ‚îÇ\n          ‚ñº               ‚ñº               ‚ñº\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ   Geographic    ‚îÇ ‚îÇEpidemiological‚îÇ ‚îÇ Healthcare      ‚îÇ\n‚îÇ  Context Agent  ‚îÇ ‚îÇIntelligence   ‚îÇ ‚îÇ Resource        ‚îÇ\n‚îÇ                 ‚îÇ ‚îÇ    Agent      ‚îÇ ‚îÇ Mapping Agent   ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n          ‚îÇ               ‚îÇ               ‚îÇ\n          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n                          ‚ñº\n                ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n                ‚îÇ Risk Assessment ‚îÇ\n                ‚îÇ  & Alert Agent  ‚îÇ\n                ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n```\n\n## ü§ñ Agent Specifications\n\n### 1. Geographic Context Agent\n**Purpose**: Process location inputs and provide comprehensive geographic health context\n\n**Key Features**:\n- Geocoding using free Nominatim service\n- Administrative boundary detection\n- Health jurisdiction mapping\n- Demographic context analysis\n- Real-time health authority contact search\n\n**Agent Type**: `GEOGRAPHIC_CONTEXT_AGENT`\n\n### 2. Epidemiological Intelligence Agent\n**Purpose**: Monitor disease patterns, outbreaks, and epidemiological trends by location\n\n**Key Features**:\n- CDC outbreak monitoring\n- WHO health alert tracking\n- Antimicrobial resistance surveillance\n- Travel health advisories\n- Endemic disease pattern analysis\n- Seasonal risk assessment\n\n**Agent Type**: `EPIDEMIOLOGICAL_INTELLIGENCE_AGENT`\n\n### 3. Healthcare Resource Mapping Agent\n**Purpose**: Map healthcare resources, capacity, and accessibility by location\n\n**Key Features**:\n- Emergency services mapping\n- Hospital capacity monitoring\n- Specialist availability tracking\n- Insurance coverage verification\n- Transportation accessibility assessment\n- Real-time facility status updates\n\n**Agent Type**: `HEALTHCARE_RESOURCE_MAPPING_AGENT`\n\n### 4. Risk Assessment & Alert Agent\n**Purpose**: Synthesize location intelligence into actionable health alerts and recommendations\n\n**Key Features**:\n- Multi-source data synthesis\n- Risk level categorization (low/moderate/high/critical)\n- Preventive measure recommendations\n- Emergency preparedness protocols\n- Monitoring alert generation\n- Confidence level assessment\n\n**Agent Type**: `RISK_ASSESSMENT_ALERT_AGENT`\n\n### 5. Master Location Health Intelligence Agent\n**Purpose**: Orchestrate all specialized agents and generate comprehensive health intelligence reports\n\n**Key Features**:\n- Agent workflow coordination\n- Search result validation\n- Comprehensive report generation\n- Emergency contact compilation\n- Data quality assessment\n- Real-time intelligence synthesis\n\n**Agent Type**: `LOCATION_HEALTH_INTELLIGENCE_AGENT`\n\n## üöÄ Getting Started\n\n### Prerequisites\n- Python 3.9+\n- Anthropic API key\n- Internet connection for real-time data\n\n### Installation\n\n1. **Install dependencies**:\n   ```bash\n   pip install geopy requests agno anthropic\n   ```\n\n2. **Set environment variables**:\n   ```bash\n   export ANTHROPIC_API_KEY=\"your_anthropic_api_key\"\n   ```\n\n3. **Test the system**:\n   ```bash\n   python test_location_intelligence.py\n   ```\n\n### Quick Start Example\n\n```python\nfrom app.agents.agent_factory import AgentFactory\nfrom app.agents.enum.agent_enum import AgentType\nimport json\n\n# Initialize the master agent\nmaster_agent = AgentFactory.get_agent(AgentType.LOCATION_HEALTH_INTELLIGENCE_AGENT)\n\n# Simple query\nresult = master_agent.get_response(\"Austin, Texas\")\nprint(result)\n\n# Detailed query with parameters\nquery = {\n    \"location\": \"Austin, Texas\",\n    \"patient_context\": \"Elderly patient with diabetes\",\n    \"emergency_level\": \"urgent\",\n    \"query_type\": \"comprehensive\"\n}\n\nresult = master_agent.get_response(json.dumps(query))\nprint(result)\n```\n\n## üìä Data Sources\n\nThe system leverages **free, open-source data sources**:\n\n### Geographic Data\n- **Nominatim** (OpenStreetMap) - Free geocoding and reverse geocoding\n- **Administrative boundaries** - Country, state, county, city mapping\n\n### Health Intelligence\n- **CDC Open Data** - Disease surveillance and outbreak monitoring\n- **WHO RSS Feeds** - International health alerts and advisories\n- **DuckDuckGo API** - Real-time health news and updates\n- **Government health websites** - Official health department information\n\n### Healthcare Resources\n- **Public hospital directories** - Facility location and contact information\n- **Emergency services data** - 911 services and trauma center information\n- **Healthcare.gov resources** - Insurance and provider networks\n\n## üîß Configuration\n\n### Agent Prompts\nAll agent prompts are centralized in `app/agents/agent_prompt_repository.py`:\n\n```python\nfrom app.agents.agent_prompt_repository import agent_prompt_repository\nfrom app.agents.enum.agent_enum import AgentType\n\n# Access agent prompts\ngeo_prompt = agent_prompt_repository[AgentType.GEOGRAPHIC_CONTEXT_AGENT]\n```\n\n### Agent Factory\nAgents are created through the factory pattern in `app/agents/agent_factory.py`:\n\n```python\nfrom app.agents.agent_factory import AgentFactory\nfrom app.agents.enum.agent_enum import AgentType\n\n# Create any agent\nagent = AgentFactory.get_agent(AgentType.LOCATION_HEALTH_INTELLIGENCE_AGENT)\n```\n\n## üìã API Reference\n\n### Master Agent Methods\n\n#### `analyze_location_health_intelligence(location, patient_context, emergency_level, query_type)`\n- **location** (str): Location to analyze (address, coordinates, or region)\n- **patient_context** (str, optional): Patient demographics or medical context\n- **emergency_level** (str): \"routine\", \"urgent\", or \"emergency\"\n- **query_type** (str): \"comprehensive\", \"outbreak_monitoring\", \"travel_advisory\", or \"resource_mapping\"\n\n#### `get_response(query)`\n- **query** (str): Location string or JSON with detailed parameters\n- **Returns**: Comprehensive health intelligence report (markdown format)\n\n### Individual Agent Methods\n\nEach specialized agent implements the `BaseAgent` interface:\n\n```python\nclass BaseAgent(ABC):\n    @abstractmethod\n    def get_response(self, query: str) -> str:\n        pass\n```\n\n## üß™ Testing\n\nRun the comprehensive test suite:\n\n```bash\npython test_location_intelligence.py\n```\n\n**Test Coverage**:\n- Agent enum completeness\n- Individual agent functionality\n- Master agent coordination\n- Comprehensive workflow testing\n- Error handling validation\n\n## üõ°Ô∏è Security & Privacy\n\n### Data Protection\n- **No PII storage** - Patient data is processed in memory only\n- **Geofencing** - Only necessary geographic precision collected\n- **Encryption** - All API communications use HTTPS\n- **Access controls** - Role-based access to health intelligence\n\n### Compliance\n- **HIPAA considerations** - Designed for healthcare data protection\n- **Data minimization** - Only essential data collected and processed\n- **Audit trails** - Complete logging of health intelligence queries\n\n## üö® Alert System\n\nThe system generates three types of alerts:\n\n### Critical Alerts\n- Disease outbreak in immediate area\n- Environmental health emergency\n- Healthcare system capacity crisis\n- Travel health emergency\n\n### Warning Alerts\n- Increased disease activity in region\n- Antimicrobial resistance concerns\n- Seasonal health risks approaching\n- Healthcare resource limitations\n\n### Informational Alerts\n- Routine health advisories\n- Preventive measure recommendations\n- Healthcare resource updates\n- Demographic health trends\n\n## üìà Performance Considerations\n\n### Search Optimization\n- **Parallel searches** across multiple agents\n- **Result caching** with appropriate TTL\n- **Fallback data sources** for resilience\n- **Search rate limiting** to respect API limits\n\n### Scalability\n- **Agent-based architecture** enables horizontal scaling\n- **SQLite storage** for development, PostgreSQL for production\n- **Redis caching** for high-frequency queries\n- **Load balancing** across agent instances\n\n## üîÑ Workflow Examples\n\n### Emergency Scenario\n```python\n# Emergency outbreak response\nquery = {\n    \"location\": \"San Francisco, CA\",\n    \"emergency_level\": \"emergency\",\n    \"query_type\": \"outbreak_monitoring\"\n}\n\nresult = master_agent.get_response(json.dumps(query))\n# Returns immediate outbreak status, emergency contacts, facility capacity\n```\n\n### Travel Health Advisory\n```python\n# International travel preparation\nquery = {\n    \"location\": \"Bangkok, Thailand\",\n    \"patient_context\": \"Business traveler, no chronic conditions\",\n    \"query_type\": \"travel_advisory\"\n}\n\nresult = master_agent.get_response(json.dumps(query))\n# Returns vaccination requirements, health risks, prevention measures\n```\n\n### Healthcare Resource Planning\n```python\n# Resource planning for chronic condition\nquery = {\n    \"location\": \"Denver, Colorado\",\n    \"patient_context\": \"Diabetic patient requiring specialist care\",\n    \"emergency_level\": \"routine\",\n    \"query_type\": \"resource_mapping\"\n}\n\nresult = master_agent.get_response(json.dumps(query))\n# Returns specialist availability, insurance coverage, facility quality ratings\n```\n\n## ü§ù Contributing\n\n### Adding New Agents\n1. Create agent class inheriting from `BaseAgent`\n2. Add agent type to `AgentType` enum\n3. Add prompt to `agent_prompt_repository`\n4. Register in `AgentFactory`\n5. Add tests to test suite\n\n### Extending Data Sources\n1. Add new source integration to `geo_intelligence_tools.py`\n2. Update search strategies in agent prompts\n3. Add source validation and error handling\n4. Update documentation and tests\n\n## üìû Support\n\nFor questions, issues, or contributions:\n- Create GitHub issues for bugs or feature requests\n- Review test output for debugging information\n- Check agent logs for detailed execution traces\n\n## üìÑ License\n\nThis project is designed for healthcare applications and should be used in compliance with local healthcare regulations and data protection laws.\n\n---\n\n**Built with üè• for better healthcare decision-making**\n